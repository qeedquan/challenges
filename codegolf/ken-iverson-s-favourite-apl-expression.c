/*

Ken Iverson, 1920–2020
(0,x)-(x,0)
Let's implement his favourite expression:

Given a row of Pascal's triangle, compute the next row.
This can for example be computed by taking the input padded with a zero on the left, and the input padded with a zero on the right, and then adding the two element-by-element.

Test cases
[1] → [1,1]

[1,1] → [1,2,1]

[1,2,1] → [1,3,3,1]

[1,10,45,120,210,252,210,120,45,10,1] → [1,11,55,165,330,462,462,330,165,55,11,1]

[1,50,1225,19600,230300,2118760,15890700,99884400,536878650,2505433700,10272278170,37353738800,121399651100,354860518600,937845656300,2250829575120,4923689695575,9847379391150,18053528883775,30405943383200,47129212243960,67327446062800,88749815264600,108043253365600,121548660036300,126410606437752,121548660036300,108043253365600,88749815264600,67327446062800,47129212243960,30405943383200,18053528883775,9847379391150,4923689695575,2250829575120,937845656300,354860518600,121399651100,37353738800,10272278170,2505433700,536878650,99884400,15890700,2118760,230300,19600,1225,50,1] → [1,51,1275,20825,249900,2349060,18009460,115775100,636763050,3042312350,12777711870,47626016970,158753389900,476260169700,1292706174900,3188675231420,7174519270695,14771069086725,27900908274925,48459472266975,77535155627160,114456658306760,156077261327400,196793068630200,229591913401900,247959266474052,247959266474052,229591913401900,196793068630200,156077261327400,114456658306760,77535155627160,48459472266975,27900908274925,14771069086725,7174519270695,3188675231420,1292706174900,476260169700,158753389900,47626016970,12777711870,3042312350,636763050,115775100,18009460,2349060,249900,20825,1275,51,1]

*/

#include <assert.h>
#include <stdio.h>
#include <string.h>

#define nelem(x) (sizeof(x) / sizeof(x[0]))

typedef unsigned long long uvlong;

void
print(uvlong *a, size_t n)
{
	size_t i;

	for (i = 0; i < n; i++)
		printf("%llu ", a[i]);
	printf("\n");
}

size_t
pascal(uvlong *a, size_t n, uvlong *r)
{
	size_t i;

	for (i = 0; i <= n; i++) {
		if (i == 0)
			r[i] = a[i];
		else if (i == n)
			r[i] = a[i - 1];
		else
			r[i] = a[i - 1] + a[i];
	}
	return n + 1;
}

void
test(uvlong *a, size_t n, uvlong *r, size_t nr)
{
	uvlong p[128];
	size_t np;

	np = pascal(a, n, p);
	print(p, np);
	assert(np == nr);
	assert(!memcmp(p, r, nr * sizeof(*r)));
}

int
main(void)
{
	uvlong a1[] = {1};
	uvlong r1[] = {1, 1};

	uvlong a2[] = {1, 1};
	uvlong r2[] = {1, 2, 1};

	uvlong a3[] = {1, 2, 1};
	uvlong r3[] = {1, 3, 3, 1};

	uvlong a4[] = {1, 10, 45, 120, 210, 252, 210, 120, 45, 10, 1};
	uvlong r4[] = {1, 11, 55, 165, 330, 462, 462, 330, 165, 55, 11, 1};

	uvlong a5[] = {1ULL, 50ULL, 1225ULL, 19600ULL, 230300ULL, 2118760ULL, 15890700ULL, 99884400ULL, 536878650ULL, 2505433700ULL, 10272278170ULL, 37353738800ULL, 121399651100ULL, 354860518600ULL, 937845656300ULL, 2250829575120ULL, 4923689695575ULL, 9847379391150ULL, 18053528883775ULL, 30405943383200ULL, 47129212243960ULL, 67327446062800ULL, 88749815264600ULL, 108043253365600ULL, 121548660036300ULL, 126410606437752ULL, 121548660036300ULL, 108043253365600ULL, 88749815264600ULL, 67327446062800ULL, 47129212243960ULL, 30405943383200ULL, 18053528883775ULL, 9847379391150ULL, 4923689695575ULL, 2250829575120ULL, 937845656300ULL, 354860518600ULL, 121399651100ULL, 37353738800ULL, 10272278170ULL, 2505433700ULL, 536878650ULL, 99884400ULL, 15890700ULL, 2118760ULL, 230300ULL, 19600ULL, 1225ULL, 50ULL, 1ULL};
	uvlong r5[] = {1ULL, 51ULL, 1275ULL, 20825ULL, 249900ULL, 2349060ULL, 18009460ULL, 115775100ULL, 636763050ULL, 3042312350ULL, 12777711870ULL, 47626016970ULL, 158753389900ULL, 476260169700ULL, 1292706174900ULL, 3188675231420ULL, 7174519270695ULL, 14771069086725ULL, 27900908274925ULL, 48459472266975ULL, 77535155627160ULL, 114456658306760ULL, 156077261327400ULL, 196793068630200ULL, 229591913401900ULL, 247959266474052ULL, 247959266474052ULL, 229591913401900ULL, 196793068630200ULL, 156077261327400ULL, 114456658306760ULL, 77535155627160ULL, 48459472266975ULL, 27900908274925ULL, 14771069086725ULL, 7174519270695ULL, 3188675231420ULL, 1292706174900ULL, 476260169700ULL, 158753389900ULL, 47626016970ULL, 12777711870ULL, 3042312350ULL, 636763050ULL, 115775100ULL, 18009460ULL, 2349060ULL, 249900ULL, 20825ULL, 1275ULL, 51ULL, 1ULL};

	test(a1, nelem(a1), r1, nelem(r1));
	test(a2, nelem(a2), r2, nelem(r2));
	test(a3, nelem(a3), r3, nelem(r3));
	test(a4, nelem(a4), r4, nelem(r4));
	test(a5, nelem(a5), r5, nelem(r5));

	return 0;
}
